## Серверная часть платформы ценообразования Авито

Сервис, предоставляющий цены конечным пользователям. Он реализован с помощью API для получения цены на размещение по данным из запроса.

### Компоненты системы
* Матрицы цен
  * Базовые матрицы (актуальной всегда является лишь одна)
  * Скидочные матрицы
* Дерево локаций и категорий
* Сервис отдачи цен, представленный в виде API
* Сервис discount-segments для определения скидок пользователя
* Основной сервис, реализующий всю логику работы

### Принцип работы
Запрос происходит по API, где указывается айди локации, региона и пользователя, затем его принимает сервис отдачи цен и передает в сервис discount-segments, где определяется принадлежность пользователя к скидочным сегментам, и на основе этих данных мы переходим либо в базовую, либо в скидочную матрицу. 
Поиск цены просходит с помощью алгоритма RoadUpSearch: если в матрице цен не найдена пара категория-локация, то мы переходим на уровень выше по категории в дереве локаций и категорий, если мы дошли до корня, то поднимаем на уровень выше локацию и снова пробегаемся по категориям, пока не найдем данную пару в матрице. Если в матрице скидок не смогли найти цену, то начинаем поиск в базовой матрице.
После нахождения цены в Сервис отдачи цен передается цена, айди категории, локации и матрицы, в которой была найдена стоимость, и айди сегмента, к которому принадлежит пользователь. После чего данная информация отправляется в формате JSON.

